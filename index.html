<!DOCTYPE html>
<html lang="zh-cmn-Hans">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
  <meta http-equiv="Cache-Control" content="no-siteapp" />
  <meta name ="viewport" content ="initial-scale=1, maximum-scale=3, minimum-scale=1, user-scalable=no"> 
  <title>Test Pocket</title>
  <link rel="stylesheet" href="style/fonts/iconfont.css">
  <link rel="stylesheet" href="style/main.css">
  <script src="js/zepto.js"></script>
  <script src="js/touch.js"></script>
  <script src="js/datacontroller.js"></script>
  <script src="js/viewcontroller.js"></script>
  <script src="js/main.js"></script>
</head>
<body>
  <div class="menu-bar">
    <div id="main-menu" class="primary">
      <div class="left-compo collapsed">
        <a href="#" class="sub-toggle" data-target="#navigation"><i class="iconfont icon-list"></i></a>
      </div>
      <div class="page-title">
        记账本
      </div>
      <div class="right-compo">
        <a href="edit.html"><i class="iconfont icon-bianji"></i></a>
      </div>
    </div>
    <div id="navigation" class="secondory collapsed clearfix">
      <a class="active" href="#/list-view">账目列表</a>
      <a href="statistics.html">账目统计</a>
      <a href="#/graph-view">账目图表</a>
    </div>
  </div>  
  <div class="main-container">
    
  </div>
  <script>
    $().ready(function() {
      // initView
      vController.updateView(vController.generateListView(pocketController.generateOutput()));
      
      $('.sub-toggle').on('click', function(e) {
        e.preventDefault();
        var target = $($(this).data('target'));
        target.toggleClass('collapsed');
      });
      
      $(document).on('tap', function(e) {
        if (e.target.tagName == "A") {
          $anchor = $(e.target);  
        } else {
          $anchor = $(e.target).parent('a');
        }
        
        if ($anchor.length>0) {
          if ($anchor.hasClass("item-edit")) {
            var id = $anchor.data('id');
            window.location =  "edit.html?id="+id; 
          } else if ($anchor.hasClass('item-delete')) {
            var id = $anchor.data('id');
            pocketController.deleteItemById(id);
            vController.updateView(vController.generateListView(pocketController.generateOutput()));
          }
        };
      });
      
    });
  </script>
</body>
</html>